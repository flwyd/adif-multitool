# Tests Cabrillo conversion of RSGB IOTA spec from
# https://www.qrz.lt/ly1vp/ataskaitu_formatai/cabrillo/qso-template.html

env MY_EXCHANGE='rst:rst_sent ex1:stx ex2:my_iota?=EU-005'
env THEIR_EXCHANGE='rst:rst_rcvd ex1:srx ex2:iota?'

# RSGB IOTA: conversion from Cabrillo to Cabrillo
exec adifmt cat --output cabrillo --cabrillo-my-exchange $MY_EXCHANGE --cabrillo-their-exchange $THEIR_EXCHANGE iota-example.cabrillo
cmp stdout iota-example-formatted.cabrillo
! stderr .

# RSGB IOTA: conversion from Cabrillo to TSV
exec adifmt cat --output tsv --cabrillo-my-exchange $MY_EXCHANGE --cabrillo-their-exchange $THEIR_EXCHANGE iota-example.cabrillo
cmp stdout iota-example.tsv
! stderr .

-- iota-example.cabrillo --
START-OF-LOG: 3.0
CONTEST: RSGB-IOTA
CALLSIGN: G3XTT
OPERATORS: NK1G
CATEGORY-ASSISTED: ASSISTED
CATEGORY-OPERATOR: SINGLE-OP
CATEGORY-BAND: ALL
CATEGORY-POWER: HIGH
CATEGORY-MODE: MIXED
CATEGORY-STATION: DXPEDITION
CATEGORY-TIME: 24-HOURS
LOCATION: Great Britain
CLAIMED-SCORE: 311040
NAME: Don Field
ADDRESS: 105 Shiplake Bottom
ADDRESS: Peppard Common
ADDRESS-CITY: Henley on Thames
ADDRESS-POSTALCODE: RG9 5HJ
ADDRESS-COUNTRY: England
SOAPBOX: Pleased to see the excellent expedition activity this year.
CREATED-BY: KOlog v1.0
QSO: 28000 CW 2002-07-27 1600 G3XTT         599 0001 EU-005 EA5BM         599 0031 ------
QSO: 28000 CW 2002-07-27 1601 G3XTT         599 0002 EU-005 PY1NX         599 0186 ------
QSO: 28000 CW 2002-07-27 1602 G3XTT         599 0003 EU-005 M6T           599 0451 EU-005
QSO: 28000 CW 2002-07-27 1611 G3XTT         599 0004 EU-005 9M6A          599 0310 OC-088
QSO: 28000 CW 2002-07-27 1617 G3XTT         599 0005 EU-005 9A7P          599 0218 ------
QSO: 28000 CW 2002-07-27 1618 G3XTT         599 0006 EU-005 HA8TP         599 0067 ------
QSO: 28000 CW 2002-07-27 1619 G3XTT         599 0007 EU-005 G4BUO         599 0184 EU-005
QSO: 28000 CW 2002-07-27 1633 G3XTT         599 0008 EU-005 LZ2PL         599 0011 ------
QSO: 14000 CW 2002-07-27 1635 G3XTT         599 0009 EU-005 R1MVI         599 0536 EU-117
QSO: 14000 PH 2002-07-27 1721 G3XTT         59  0010 EU-005 YB5NOF/P      59  0158 OC-106
QSO: 21000 PH 2002-07-27 1722 G3XTT         59  0011 EU-005 PJ2Y          59  0537 SA-006
QSO: 21000 PH 2002-07-27 1724 G3XTT         59  0012 EU-005 KP2/AA1BU     59  0417 NA-106
QSO: 21000 CW 2002-07-27 1726 G3XTT         599 0013 EU-005 CU9D          599 0573 EU-089
QSO: 21000 CW 2002-07-27 1726 G3XTT         599 0014 EU-005 OH9A          599 0883 EU-173
QSO: 21000 CW 2002-07-27 1728 G3XTT         599 0015 EU-005 9V1YC         599 0331 AS-019
QSO: 21000 CW 2002-07-27 1732 G3XTT         599 0016 EU-005 S53EO         599 0402 ------
QSO: 21000 PH 2002-07-27 1734 G3XTT         59  0017 EU-005 ZD9IR         59  0362 AF-030
END-OF-LOG:
-- iota-example-formatted.cabrillo --
START-OF-LOG: 3.0
X-INSTRUCTIONS: Fill out headers following contest instructions
X-INSTRUCTIONS: Delete any unnecessary headers
X-INSTRUCTIONS: Double-check QSO lines, keeping columns in order
X-INSTRUCTIONS: Report bugs at https://github.com/flwyd/adif-multitool
CREATED-BY: ADIF Multitool (devel)
SOAPBOX: Pleased to see the excellent expedition activity this year.
CONTEST: RSGB-IOTA
CALLSIGN: G3XTT
CLUB:
OPERATORS: NK1G
NAME: Don Field
EMAIL:
ADDRESS: 105 Shiplake Bottom
ADDRESS: Peppard Common
ADDRESS-CITY: Henley on Thames
ADDRESS-STATE-PROVINCE:
ADDRESS-POSTALCODE: RG9 5HJ
ADDRESS-COUNTRY: England
GRID-LOCATOR:
LOCATION: Great Britain
CLAIMED-SCORE: 311040
OFFTIME:
CATEGORY-ASSISTED: ASSISTED
CATEGORY-BAND: ALL
CATEGORY-MODE: MIXED
CATEGORY-OPERATOR: SINGLE-OP
CATEGORY-OVERLAY:
CATEGORY-POWER: HIGH
CATEGORY-STATION: DXPEDITION
CATEGORY-TIME: 24-HOURS
CATEGORY-TRANSMITTER:
X-INSTRUCTIONS: See contest rules for expected category values
X-Q:                          --info sent---------- --info rcvd--------------
X-Q: freq  mo date       time call  rst ex1  ex2    call      rst ex1  ex2
QSO: 28000 CW 2002-07-27 1600 G3XTT 599 0001 EU-005 EA5BM     599 0031 ---
QSO: 28000 CW 2002-07-27 1601 G3XTT 599 0002 EU-005 PY1NX     599 0186 ---
QSO: 28000 CW 2002-07-27 1602 G3XTT 599 0003 EU-005 M6T       599 0451 EU-005
QSO: 28000 CW 2002-07-27 1611 G3XTT 599 0004 EU-005 9M6A      599 0310 OC-088
QSO: 28000 CW 2002-07-27 1617 G3XTT 599 0005 EU-005 9A7P      599 0218 ---
QSO: 28000 CW 2002-07-27 1618 G3XTT 599 0006 EU-005 HA8TP     599 0067 ---
QSO: 28000 CW 2002-07-27 1619 G3XTT 599 0007 EU-005 G4BUO     599 0184 EU-005
QSO: 28000 CW 2002-07-27 1633 G3XTT 599 0008 EU-005 LZ2PL     599 0011 ---
QSO: 14000 CW 2002-07-27 1635 G3XTT 599 0009 EU-005 R1MVI     599 0536 EU-117
QSO: 14000 PH 2002-07-27 1721 G3XTT 59  0010 EU-005 YB5NOF/P  59  0158 OC-106
QSO: 21000 PH 2002-07-27 1722 G3XTT 59  0011 EU-005 PJ2Y      59  0537 SA-006
QSO: 21000 PH 2002-07-27 1724 G3XTT 59  0012 EU-005 KP2/AA1BU 59  0417 NA-106
QSO: 21000 CW 2002-07-27 1726 G3XTT 599 0013 EU-005 CU9D      599 0573 EU-089
QSO: 21000 CW 2002-07-27 1726 G3XTT 599 0014 EU-005 OH9A      599 0883 EU-173
QSO: 21000 CW 2002-07-27 1728 G3XTT 599 0015 EU-005 9V1YC     599 0331 AS-019
QSO: 21000 CW 2002-07-27 1732 G3XTT 599 0016 EU-005 S53EO     599 0402 ---
QSO: 21000 PH 2002-07-27 1734 G3XTT 59  0017 EU-005 ZD9IR     59  0362 AF-030
END-OF-LOG:
-- iota-example.tsv --
BAND	MODE	QSO_DATE	TIME_ON	STATION_CALLSIGN	RST_SENT	STX	MY_IOTA	CALL	RST_RCVD	SRX	IOTA	OPERATOR	CONTEST_ID
10m	CW	20020727	1600	G3XTT	599	0001	EU-005	EA5BM	599	0031		NK1G	RSGB-IOTA
10m	CW	20020727	1601	G3XTT	599	0002	EU-005	PY1NX	599	0186		NK1G	RSGB-IOTA
10m	CW	20020727	1602	G3XTT	599	0003	EU-005	M6T	599	0451	EU-005	NK1G	RSGB-IOTA
10m	CW	20020727	1611	G3XTT	599	0004	EU-005	9M6A	599	0310	OC-088	NK1G	RSGB-IOTA
10m	CW	20020727	1617	G3XTT	599	0005	EU-005	9A7P	599	0218		NK1G	RSGB-IOTA
10m	CW	20020727	1618	G3XTT	599	0006	EU-005	HA8TP	599	0067		NK1G	RSGB-IOTA
10m	CW	20020727	1619	G3XTT	599	0007	EU-005	G4BUO	599	0184	EU-005	NK1G	RSGB-IOTA
10m	CW	20020727	1633	G3XTT	599	0008	EU-005	LZ2PL	599	0011		NK1G	RSGB-IOTA
20m	CW	20020727	1635	G3XTT	599	0009	EU-005	R1MVI	599	0536	EU-117	NK1G	RSGB-IOTA
20m	SSB	20020727	1721	G3XTT	59	0010	EU-005	YB5NOF/P	59	0158	OC-106	NK1G	RSGB-IOTA
15m	SSB	20020727	1722	G3XTT	59	0011	EU-005	PJ2Y	59	0537	SA-006	NK1G	RSGB-IOTA
15m	SSB	20020727	1724	G3XTT	59	0012	EU-005	KP2/AA1BU	59	0417	NA-106	NK1G	RSGB-IOTA
15m	CW	20020727	1726	G3XTT	599	0013	EU-005	CU9D	599	0573	EU-089	NK1G	RSGB-IOTA
15m	CW	20020727	1726	G3XTT	599	0014	EU-005	OH9A	599	0883	EU-173	NK1G	RSGB-IOTA
15m	CW	20020727	1728	G3XTT	599	0015	EU-005	9V1YC	599	0331	AS-019	NK1G	RSGB-IOTA
15m	CW	20020727	1732	G3XTT	599	0016	EU-005	S53EO	599	0402		NK1G	RSGB-IOTA
15m	SSB	20020727	1734	G3XTT	59	0017	EU-005	ZD9IR	59	0362	AF-030	NK1G	RSGB-IOTA
